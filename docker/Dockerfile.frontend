FROM node:18-alpine

# Set working directory
WORKDIR /app

# Install dependencies first
COPY package*.json ./
RUN npm install

# Add polling support for file change detection
ENV CHOKIDAR_USEPOLLING=true

# Expose the development port
EXPOSE 3000

# Copy rest of the code (volume mount will override this in compose)
COPY . .

# Start React dev server with correct host
CMD ["npm", "start"]
